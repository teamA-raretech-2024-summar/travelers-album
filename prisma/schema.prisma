generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DIRECT_URL")
}

model Users {
  id                  String             @id @default(uuid()) @db.VarChar(50)
  find_id             String             @unique @default(uuid()) @db.VarChar(50)
  name                String             @db.VarChar(50)
  email               String             @unique
  password            String
  birthday            DateTime           @db.Date
  icon                String?
  Fellowtravelers     Fellowtravelers[]  @relation("UserFellowTravelers")
  FellowTo            Fellowtravelers[]  @relation("FellowToUser")
  Tripboards_Users    Tripboards_Users[]
  OwnedTripboards     Tripboards[]       @relation("TripboardOwner")
  InvitedToTripboards Tripboards_Users[] @relation("InvitedUser")
}

model Fellowtravelers {
  id        Int     @id @default(autoincrement())
  user_id   String
  user      Users   @relation("UserFellowTravelers", fields: [user_id], references: [id])
  fellow_id String?
  fellow    Users?  @relation("FellowToUser", fields: [fellow_id], references: [id])
}

model Tripboards_Users {
  id            Int        @id @default(autoincrement())
  user_id       String
  user          Users      @relation(fields: [user_id], references: [id])
  tripboard_id  String
  tripboard     Tripboards @relation(fields: [tripboard_id], references: [id])
  inviteuser_id String
  inviteuser    Users      @relation("InvitedUser", fields: [inviteuser_id], references: [id])
  repestion     Boolean?
}

model Tripboards {
  id               String             @id @default(uuid()) @db.VarChar(50)
  title            String             @db.VarChar(50)
  thumbnail        String
  owner_id         String
  owner            Users              @relation("TripboardOwner", fields: [owner_id], references: [id])
  start_at         DateTime           @db.Date
  end_at           DateTime?          @db.Date
  lastupdate_at    DateTime           @default(now()) @db.Timestamp(6)
  Tripcards        Tripcards[]
  Tripboards_Users Tripboards_Users[]
}

model Tripcards {
  id           String         @id @default(uuid())
  board_id     String
  TripBoard    Tripboards     @relation(fields: [board_id], references: [id])
  memo         String?
  thumbnail    String?
  Cardpictures Cardpictures[]
}

model Cardpictures {
  id              String    @id @default(uuid()) @db.VarChar(50)
  tripcard_id     String
  Tripcard        Tripcards @relation(fields: [tripcard_id], references: [id])
  picture_url     String?
  take_at         DateTime? @db.Date
  location_pointx Float
  location_pointy Float
}
